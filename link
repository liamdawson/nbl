#!/usr/bin/env bash

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"

if test -d /home/linuxbrew/.linuxbrew/bin; then
  export PATH="$PATH:/home/linuxbrew/.linuxbrew/bin"
fi

if ! command -v stow >/dev/null; then
  echo "ERROR: stow not found"
  exit 1
fi

STOW_PATH="$(command -v stow)"

restow() {
  "$STOW_PATH" --restow -d "${DIR}/stowed" "$@" 
}

# stow user binaries

mkdir -p "${HOME}/.local/bin"
restow -t "$HOME" binaries

mkdir -p "${HOME}/.config/fish/conf.d"
restow -t "${HOME}/.config/fish" fish

